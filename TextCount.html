<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="TxtCnt-title.ico">
    <title>字数カウント</title>
    <link rel="stylesheet" href="textCounter.css">
</head>

<body>
    
    <!--<div id="div1">
        <p id="p1">字数カウント</p> 
    </div>-->

    <div id="condition">
        <div id="cdn">
            <input type="checkbox" name="selection">
            <p id="p2">レポートの条件を指定<!-- :&nbsp;--></p>
        </div>

        <div id="value">
            <!--<input type="number" id="wrt1" min="0">
            <p>&nbsp;文字　～&emsp;</p>
            <input type="number" id="wrt2" min="0" max="9999">
            <p>&nbsp;文字</p>-->
            <button id="resetBtn">リセット</button>
        </div>
    </div>

    <div id="div2">
        <p>字数 :&nbsp;</p>
        <p id="num">0 文字</p>
    </div>

    <div id="div3">
        <textarea placeholder="カウントしたい文をペーストしてください" id="text" onkeyup="showCount(this);" cols="30" rows="10"></textarea>
    </div>

    <script>
        const num = document.getElementById('num');
        const text = document.getElementById('text');
        const resetBtn = document.getElementById('resetBtn');
        const wrt1 = document.getElementById('wrt1');
        const wrt2 = document.getElementById('wrt2');

        const showCount = (str) => {
            const strNum = str.value;
            const strLength = strNum.replace(/\s+/g, '').length; 
            num.innerHTML = strLength +' '+ '文字'; //句読点を除く場合は.replace(/\s+|。|、/g, '')

            if (wrt1.value < wrt2.value && strLength != '' && wrt1.value && wrt2.value) {
                if (wrt2.value < strLength) {
                    const oneceAns = strLength - wrt2.value;
                    window.alert(oneceAns + '文字多いです');
                } else if (wrt1.value > strLength) {
                    const secondAns = wrt1.value - strLength;
                    window.alert(secondAns + '文字不足しています');
                } else {
                    window.alert('条件を満たしています');
                }
                return;
            } else if (wrt1.value > strLength && !wrt2.value) {
                const thirdAns = wrt1.value - strLength;
                window.alert(thirdAns + '文字不足しています');
            } else if (wrt2.value < strLength && !wrt1.value) {
                const forthAns = strLength - wrt2.value;
                window.alert(forthAns + '文字多いです');
            } else if (wrt1.value == strLength && wrt2.value == strLength) {
                window.alert('条件を満たしています');
            } else if (wrt1.value > wrt2.value && strLength != '' && wrt1.value && wrt2.value) {
                window.alert('条件を修正してください');
            }
        };

        const resetText = () => {
            num.innerHTML = '0 文字';
            text.value = '';
            wrt1.value = '';
            wrt2.value = '';
        };

        resetBtn.addEventListener('click', () => {
            resetText();
        });
    </script>
</body>

</html>